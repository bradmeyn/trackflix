import Head from 'next/head';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import {
  faMagnifyingGlass,
  faCheck,
  faBookmark,
} from '@fortawesome/pro-regular-svg-icons';
import { useState } from 'react';
import { IMovie } from '@/types/types';
import Card from '@/components/Card';
import Navbar from '@/components/layout/Navbar';
import Footer from '@/components/layout/Footer';
import { Inter } from '@next/font/google';
import { getPopularMovies, getTopRatedMovies } from '@/movieService';
import Carousel from '@/components/Carousel';
import Image from 'next/image';
import LargeCarousel from '@/components/LargeCarousel';
const inter = Inter({ subsets: ['latin'] });

export default function Movies({ movies }: { movies: IMovie[] }) {
  return (
    <>
      <Head>
        <title>Watchflix | Popular</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <div className='flex min-h-screen grow flex-col bg-gradient-to-t from-slate-800 to-slate-900 '>
        <Navbar />
        <main className={'flex grow flex-col '}>
          <LargeCarousel movies={movies} />
          <h2 className='md:text-2x mb-2 text-xl font-bold text-white'>
            Popular Now
          </h2>
          <div className='grid grid-flow-col gap-3 '>
            {movies
              ? movies.map((movie) => (
                  <Card
                    key={movie.id}
                    id={movie.id}
                    title={movie.title}
                    poster={movie.poster_path}
                  />
                ))
              : ''}
          </div>

          <Carousel
            title={'Highest Rated Movies of All Time'}
            movies={movies}
          />
          <Carousel
            title={'Highest Rated Movies of All Time'}
            movies={movies}
          />
          <Carousel
            title={'Highest Rated Movies of All Time'}
            movies={movies}
          />
          <Carousel
            title={'Highest Rated Movies of All Time'}
            movies={movies}
          />
        </main>
        <Footer />
      </div>
    </>
  );
}

export async function getStaticProps() {
  const response = await getPopularMovies();
  const movies: IMovie[] = response.data.results;

  return {
    props: {
      movies,
    },
  };
}
